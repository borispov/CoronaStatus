{"version":3,"file":"static/webpack/static/development/pages/index.js.5670efdaf8fda7845af9.hot-update.js","sources":["webpack:///./utils/useStats.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport axios from 'axios'\n\nconst capitalize = str => str.charAt(0).toUpperCase + str.toLowerCase().slice(1)\n\nfunction getCountry(list){\n  return function(queryCountry) {\n    return list.reduce((a,c) => c.country === queryCountry ? c : a, {})\n  }\n}\n\nasync function currentCountry(){\n  return await axios\n    .get('https://extreme-ip-lookup.com/json/')\n    .then(res => res.data.country)\n    .catch(e => 'Israel')\n}\n\nfunction useStats(url, country) {\n  const [stats, setStats] = useState();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n\n  useEffect(() => {\n\n    async function fetchData() {\n      console.log('fetching data');\n      setLoading(true)\n      setError()\n      let searchCountry = country || await currentCountry();\n      console.log(searchCountry);\n\n      const data = await fetch(url)\n          .then(res => res.json())\n          .then(d => getCountry(d)(searchCountry))\n          .catch(err => setError(err))\n      setStats(data)\n      setLoading(false)\n    }\n    fetchData();\n  }, [country])\n  return {\n    stats, loading, error\n  }\n}\n\nexport default useStats;\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AACA;AAAA;AACA;AALA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAMA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAIA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAAA;AACA;AADA;AAIA;AACA;AALA;AAAA;AAQA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAXA;AAOA;AAIA;AACA;AACA;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAaA;AACA;AACA;AACA;AAAA;AAAA;AADA;AAGA;AACA;AACA;;;;A","sourceRoot":""}