{"version":3,"file":"static/webpack/static/development/pages/index.js.ff2fa27621a7c24d2862.hot-update.js","sources":["webpack:///./utils/useStats.js"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport axios from 'axios'\n\nfunction getCountry(list){\n  return function(queryCountry) {\n    return list.reduce((a,c) => c.country === queryCountry ? c : a, {})\n  }\n}\n\nasync function currentCountry(){\n  return await axios\n    .get('https://extreme-ip-lookup.com/json/')\n    .then(res => res.data.country)\n    .catch(e => 'Israel')\n}\n\nfunction useStats(url, country) {\n  console.log(country);\n  const [stats, setStats] = useState();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(false);\n\n  if (!url) setLoading(true)\n\n  useEffect(() => {\n\n    async function fetchData() {\n      setLoading(true)\n      setError()\n      let searchCountry = country || currentCountry();\n\n      const data = await fetch(url)\n          .then(res => res.json())\n          .then(d => getCountry(d)(searchCountry))\n          .catch(err => setError(err))\n      setStats(data)\n      setLoading(false)\n    }\n    fetchData();\n  }, [])\n  return {\n    stats, loading, error\n  }\n}\n\nexport default useStats;\n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AACA;AAAA;AACA;AALA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAMA;AACA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAKA;AAEA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAHA;AAAA;AAMA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AATA;AAKA;AAIA;AACA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAWA;AACA;AACA;AACA;AAAA;AAAA;AADA;AAGA;AACA;AACA;;;;A","sourceRoot":""}