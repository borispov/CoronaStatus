{"version":3,"file":"static/webpack/static/development/pages/index.js.f33612afab5314c6b34b.hot-update.js","sources":["webpack:///./components/CoronaApp.js"],"sourcesContent":["import { useState } from 'react'\nimport { withTheme } from 'styled-components'\nimport Select from 'react-select'\n\nimport useTime from '../hooks/useTime'\nimport useTodayStats from '../hooks/useTodayStats'\nimport useCountries from '../hooks/useCountries'\nimport useYday from '../hooks/useYday'\nimport useTranslation from '../hooks/useTranslation'\n\nimport { Container } from './S'\nimport Stats from './Stats'\nimport Chart from './Chart'\nimport HeaderDescription from './HeaderDescription'\nimport CaseChart from './CaseChart'\n\nimport countriesHebArray from '../assets/cns.js'\n\nconst calcDiff = current => prev => current !== 0 ? ((current - prev) / 100) * 100 : 0\n\nconst CoronaApp = ({ theme, userLocation, yesterdayC, yesterdayGlobal, worldTime }) => {\n\n  const { t, locale } = useTranslation()\n  const isHeb = locale === 'he'\n\n  // const [hebCountry, setHebCountry] = useState(countryheb(country))\n  const [showWorld, setShowWorld] = useState(true)\n  const [country, setCountry] = useState(userLocation)\n  const [inputValue, setInput] = useState('')\n\n  const url = 'https://nCorona.live/api/v1/'\n  const worldUrl = 'https://corona.lmao.ninja/all'\n  const v2 = 'https://corona.lmao.ninja/v2/countries/'\n  const { countryStats } = useTime(country, theme)\n  const { todayStats } = useTodayStats(url, country)\n  const worldToday = useTodayStats(url, 'world').todayStats\n  const { yesterdayCn } = useYday(v2, country)\n\n  const { countries } = useCountries()\n\n\n  const worldTodaySorted = worldToday &&\n    {\n      cases: worldToday.cases,\n      active: worldToday.active,\n      recovered: worldToday.recovered,\n      deaths: worldToday.deaths,\n      todayCases: worldToday.todayCases,\n      affectedCountries: yesterdayGlobal.affectedCountries\n    } || ''\n\n  const yesterdayStatsSorted = yesterdayCn && {\n    cases: yesterdayCn.cases,\n    todayCases: yesterdayCn.todayCases,\n    recovered: yesterdayCn.recovered,\n    deaths: yesterdayCn.deaths,\n  } || ''\n\n  const yesterdayGlobalSorted = yesterdayGlobal && {\n    cases: yesterdayGlobal.cases,\n    active: yesterdayGlobal.active,\n    deaths: yesterdayGlobal.deaths,\n    todayCases: yesterdayGlobal.todayCases,\n    recovered: yesterdayGlobal.recovered,\n    affectedCountries: yesterdayGlobal.affectedCountries\n  } || ''\n\n  const todayStatsSorted = todayStats && \n    {\n      cases: todayStats.cases,\n      todayCases: todayStats.todayCases,\n      recovered: todayStats.recovered,\n      deaths: todayStats.deaths,\n    } || ''\n\n  const handleChange = selected => {\n    // setHebCountry(countryheb(selected.value))\n    setCountry(selected.value)\n  }\n  const handleSubmit = e => {\n    e.preventDefault();\n    setCountry(inputValue)\n  }\n\n  const countryheb = country => {\n    if (countries) {\n      let lowerCased = countries.map(a => a.toLowerCase())\n      let engIndex = lowerCased.indexOf(country)\n      return countriesHebArray[engIndex]\n    }\n    return country\n  }\n\n  // const selectOptions = countries && countries.map(a => ({ value: a, label: a }))\n  const selectOptions = !countries ? { value: 'null', label: 'Loading List...' } : !isHeb\n    ? countries.map(a => ({ value: a, label: a }))\n    : countries\n        .map((country, idx) => ({\n            value: country,\n            label: countriesHebArray[idx]\n          }))\n\n  return (\n    <div>\n\n      <Container>\n\n      <form \n        style={{ maxWidth: '520px', margin: '54px auto 12px', textAlign: 'center'}}\n        onSubmit={handleSubmit}\n      >\n        <label style={{fontSize: '16px', fontWeight: 'bold'}}>\n          {t('selectHeader', 'coronaApp')}\n        </label>\n\n\n        <Select\n          className={'Select'}\n          options={selectOptions}\n          value={country === 'Israel' && isHeb ? 'ישראל' : country}\n          onChange={handleChange}\n          placeholder={country && countryheb(country) || country}\n        />\n      </form>\n\n    <Stats\n      cn={country || todayStats && todayStats.country}\n      todayStats={todayStatsSorted}\n      yesteryday={yesterdayStatsSorted}\n      isHeb={isHeb}\n    />\n\n    {/*\n      <iframe \n        style={{  width: \"100%\", height:\"420px\" }}\n        src=\"https://coronavirus.app/map?embed=true\" \n        frameborder=\"0\" \n        allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\" \n      />\n    */}\n      {\n        countryStats &&\n          (\n              <Chart\n                isHeb={isHeb}\n                type='line'\n                labels={countryStats.labels}\n                // data={countryStats.datasets.filter(a => a.label === 'cases')}\n                data={countryStats.datasets}\n                label={country || 'israel'}\n                fill={false}\n                stops={3}\n                showLegend={false}\n              />\n          )\n      }\n\n      <Stats\n        cn={'World'}\n        todayWorld={worldTodaySorted}\n        yesteryday={yesterdayGlobalSorted}\n        isHeb={isHeb}\n      />\n\n      <HeaderDescription \n        txt={'*' + t('graphExplanation', 'coronaApp')}\n      />\n\n    <Chart\n      isHeb={isHeb}\n      type='line'\n      labels={worldTime.labels}\n      data={worldTime.datasets}\n      label={isHeb && 'עולם' || 'World'}\n      fill={false}\n      stops={3}\n      showLegend={true}\n    />\n\n    </Container>\n\n    </div>\n  )\n}\n\nexport default withTheme(CoronaApp)\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAEA;AACA;AAJA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AASA;AACA;AACA;AACA;AAbA;AAAA;AACA;AADA;AAAA;AACA;AAcA;AACA;AAhBA;AAAA;AACA;AADA;AAAA;AACA;AAoBA;AAEA;AACA;AACA;AACA;AACA;AACA;AANA;AASA;AACA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AASA;AAEA;AACA;AACA;AACA;AAJA;AACA;AAMA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAFA;AAAA;AAKA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AACA;AAFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAmBA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AATA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAeA;AACA;AACA;;;;A","sourceRoot":""}