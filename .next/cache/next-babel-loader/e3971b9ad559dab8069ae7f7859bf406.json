{"ast":null,"code":"import { useState, useEffect, useReducer } from 'react';\nimport axios from 'axios';\nimport sortForChart from '../utils/sortForChart';\nimport sortExternalApi from '../utils/sortExternalApi';\nconst baseURL = `https://nCorona.live/api/v1/alltime/`;\nconst baseURLv2 = 'https://pomber.github.io/covid19/timeseries.json';\n\nasync function currentCountry() {\n  return await axios.get('https://extreme-ip-lookup.com/json/').then(res => res.data.country).catch(e => 'israel');\n} // function useTime(loc, url = baseURL) {\n\n\nfunction useTime(loc, theme = {}) {\n  const {\n    0: countryStats,\n    1: setCountryStats\n  } = useState();\n  const {\n    0: loading,\n    1: setLoading\n  } = useState(false);\n  const {\n    0: error,\n    1: setError\n  } = useState(false);\n  const {\n    0: countries,\n    1: setCountries\n  } = useState();\n  useEffect(() => {\n    async function fetchData(cn) {\n      setLoading(true);\n      setError();\n      const country = loc || (await currentCountry());\n      const URL = baseURL + country;\n      const data = await axios.get(URL).then(res => res.data).catch(err => setError(err)); // const data = await axios.get(baseURLv2)\n      //   .then(res => res.data[country])\n      //   .catch(err => setError(err))\n      // const timeStats = sortExternalApi(data);\n\n      const timeStats = sortForChart(data, theme);\n      setCountryStats(timeStats);\n      setLoading(false);\n    }\n\n    fetchData(loc);\n  }, [loc]);\n  return {\n    countryStats,\n    loading,\n    error,\n    countries\n  };\n}\n\nexport default useTime;","map":null,"metadata":{},"sourceType":"module"}