{"ast":null,"code":"var _jsxFileName = \"/Users/raypo/Desktop/Projectos/CoronaStatus/components/CaseChart.js\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport Button from './Button';\nimport axios from 'axios';\nimport useTime from '../utils/useTime';\nimport sortForChart from '../utils/sortForChart';\nimport Chart from './Chart';\nimport Container from './Container';\nconst baseURL = `http://covid19.borisky.me:3003/api/v1/alltime/`;\n\nconst countryTimeData = async cn => {\n  console.log('fetchinGGGGG');\n  const loc = cn || (await currentCountry());\n  const data = await axios.get(baseURL + loc);\n  const dataRes = await sortForChart(data.data);\n  return dataRes;\n};\n\nconst worldTimeData = async () => {\n  const data = await axios.get(baseURL);\n  const dataRes = await sortForChart(data.data);\n  return dataRes;\n};\n\nasync function currentCountry() {\n  return await axios.get('https://extreme-ip-lookup.com/json/').then(res => res.data.country).catch(e => 'israel');\n}\n\nclass CaseChart extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"setShowWorld\", () => {\n      const showWorld = !this.state.showWorld;\n      this.setState(prevState => _objectSpread({}, prevState, {\n        showWorld: showWorld\n      }));\n    });\n\n    this.state = {\n      // country: this.props.country,\n      worldData: [],\n      countryData: [],\n      worldLabels: [],\n      countryLabels: [],\n      worldCases: [],\n      countryCases: [],\n      showWorld: true,\n      loading: false\n    };\n  }\n\n  async componentDidMount() {\n    this.setState({\n      loading: true\n    });\n\n    try {\n      const timeStats = await worldTimeData();\n      const countryStats = await countryTimeData(this.props.country);\n      const worldCases = timeStats && timeStats.datasets.filter(a => a.label === 'cases');\n      const countryCases = countryStats && countryStats.datasets.filter(a => a.label === 'cases');\n      const countryLabels = countryStats && countryStats.labels;\n      const worldLabels = timeStats && timeStats.labels;\n      this.setState({\n        worldData: timeStats,\n        countryData: countryStats,\n        worldCases,\n        countryCases,\n        worldLabels,\n        countryLabels,\n        loading: false\n      });\n    } catch (err) {\n      this.setState({\n        loading: false,\n        error: err\n      });\n    }\n  }\n\n  render() {\n    if (this.state.loading) {\n      return __jsx(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, __jsx(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, \"Loading Data . . .\"));\n    }\n\n    if (this.state.error) {\n      return __jsx(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, __jsx(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, this.state.error));\n    } // console.log(this.state.worldCases);\n\n\n    return __jsx(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'center',\n        padding: '34px 32px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, __jsx(Button, {\n      onClick: this.setShowWorld,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"World\"), __jsx(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \" | \"), __jsx(Button, {\n      onClick: this.setShowWorld,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, this.props.country || 'Israel')), this.state.worldData && __jsx(Chart, {\n      type: \"line\",\n      labels: this.state.showWorld ? this.state.worldLabels : this.state.countryLabels,\n      data: this.state.showWorld ? this.state.worldCases : this.state.countryCases,\n      label: \"Infection Growth - Country/World\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }) || __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, \" Loading Charts ... \"), console.log(this.state.worldCases));\n  }\n\n}\n\nexport default CaseChart;","map":{"version":3,"sources":["/Users/raypo/Desktop/Projectos/CoronaStatus/components/CaseChart.js"],"names":["React","Button","axios","useTime","sortForChart","Chart","Container","baseURL","countryTimeData","cn","console","log","loc","currentCountry","data","get","dataRes","worldTimeData","then","res","country","catch","e","CaseChart","Component","constructor","props","showWorld","state","setState","prevState","worldData","countryData","worldLabels","countryLabels","worldCases","countryCases","loading","componentDidMount","timeStats","countryStats","datasets","filter","a","label","labels","err","error","render","display","justifyContent","padding","setShowWorld"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AAEA,MAAMC,OAAO,GAAI,gDAAjB;;AAEA,MAAMC,eAAe,GAAG,MAAOC,EAAP,IAAc;AACpCC,EAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACA,QAAMC,GAAG,GAAGH,EAAE,KAAI,MAAMI,cAAc,EAAxB,CAAd;AACA,QAAMC,IAAI,GAAG,MAAMZ,KAAK,CAACa,GAAN,CAAUR,OAAO,GAACK,GAAlB,CAAnB;AACA,QAAMI,OAAO,GAAG,MAAMZ,YAAY,CAACU,IAAI,CAACA,IAAN,CAAlC;AACA,SAAOE,OAAP;AACD,CAND;;AAQA,MAAMC,aAAa,GAAG,YAAY;AAChC,QAAMH,IAAI,GAAG,MAAMZ,KAAK,CAACa,GAAN,CAAUR,OAAV,CAAnB;AACA,QAAMS,OAAO,GAAG,MAAMZ,YAAY,CAACU,IAAI,CAACA,IAAN,CAAlC;AACA,SAAOE,OAAP;AACD,CAJD;;AAMA,eAAeH,cAAf,GAA+B;AAC7B,SAAO,MAAMX,KAAK,CACfa,GADU,CACN,qCADM,EAEVG,IAFU,CAELC,GAAG,IAAIA,GAAG,CAACL,IAAJ,CAASM,OAFX,EAGVC,KAHU,CAGJC,CAAC,IAAI,QAHD,CAAb;AAID;;AAGD,MAAMC,SAAN,SAAwBvB,KAAK,CAACwB,SAA9B,CAAwC;AAEtCC,EAAAA,WAAW,CAACC,KAAD,EAAO;AAChB,UAAMA,KAAN;;AADgB,0CAeH,MAAM;AACnB,YAAMC,SAAS,GAAG,CAAC,KAAKC,KAAL,CAAWD,SAA9B;AACA,WAAKE,QAAL,CAAcC,SAAS,sBAAUA,SAAV;AAAqBH,QAAAA,SAAS,EAAEA;AAAhC,QAAvB;AACD,KAlBiB;;AAEhB,SAAKC,KAAL,GAAa;AACX;AACAG,MAAAA,SAAS,EAAE,EAFA;AAGXC,MAAAA,WAAW,EAAE,EAHF;AAIXC,MAAAA,WAAW,EAAE,EAJF;AAKXC,MAAAA,aAAa,EAAE,EALJ;AAMXC,MAAAA,UAAU,EAAE,EAND;AAOXC,MAAAA,YAAY,EAAE,EAPH;AAQXT,MAAAA,SAAS,EAAE,IARA;AASXU,MAAAA,OAAO,EAAE;AATE,KAAb;AAWD;;AAOD,QAAMC,iBAAN,GAA0B;AACxB,SAAKT,QAAL,CAAc;AAAEQ,MAAAA,OAAO,EAAE;AAAX,KAAd;;AAEA,QAAI;AACF,YAAME,SAAS,GAAG,MAAMtB,aAAa,EAArC;AACA,YAAMuB,YAAY,GAAG,MAAMhC,eAAe,CAAC,KAAKkB,KAAL,CAAWN,OAAZ,CAA1C;AACA,YAAMe,UAAU,GAAGI,SAAS,IAAIA,SAAS,CAACE,QAAV,CAAmBC,MAAnB,CAA0BC,CAAC,IAAIA,CAAC,CAACC,KAAF,KAAY,OAA3C,CAAhC;AACA,YAAMR,YAAY,GAAGI,YAAY,IAAIA,YAAY,CAACC,QAAb,CAAsBC,MAAtB,CAA6BC,CAAC,IAAIA,CAAC,CAACC,KAAF,KAAY,OAA9C,CAArC;AACA,YAAMV,aAAa,GAAGM,YAAY,IAAIA,YAAY,CAACK,MAAnD;AACA,YAAMZ,WAAW,GAAGM,SAAS,IAAIA,SAAS,CAACM,MAA3C;AACA,WAAKhB,QAAL,CAAc;AACZE,QAAAA,SAAS,EAAEQ,SADC;AAEZP,QAAAA,WAAW,EAAEQ,YAFD;AAGZL,QAAAA,UAHY;AAIZC,QAAAA,YAJY;AAKZH,QAAAA,WALY;AAMZC,QAAAA,aANY;AAOZG,QAAAA,OAAO,EAAE;AAPG,OAAd;AASD,KAhBD,CAgBE,OAAMS,GAAN,EAAW;AACX,WAAKjB,QAAL,CAAc;AAAEQ,QAAAA,OAAO,EAAE,KAAX;AAAkBU,QAAAA,KAAK,EAAED;AAAzB,OAAd;AACD;AAGF;;AAEDE,EAAAA,MAAM,GAAG;AAEP,QAAI,KAAKpB,KAAL,CAAWS,OAAf,EAAwB;AACtB,aAAO,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAAX,CAAP;AACD;;AACD,QAAI,KAAKT,KAAL,CAAWmB,KAAf,EAAsB;AACpB,aAAO,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAK,KAAKnB,KAAL,CAAWmB,KAAhB,CAAX,CAAP;AACD,KAPM,CASP;;;AACA,WACE,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAK,MAAA,KAAK,EAAE;AAACE,QAAAA,OAAO,EAAE,MAAV;AAAkBC,QAAAA,cAAc,EAAE,QAAlC;AAA4CC,QAAAA,OAAO,EAAE;AAArD,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,MAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,KAAKC,YAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,EACoD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADpD,EAEE,MAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,KAAKA,YAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAqC,KAAK1B,KAAL,CAAWN,OAAX,IAAsB,QAA3D,CAFF,CADF,EAMI,KAAKQ,KAAL,CAAWG,SAAX,IACE,MAAC,KAAD;AACE,MAAA,IAAI,EAAC,MADP;AAEE,MAAA,MAAM,EAAE,KAAKH,KAAL,CAAWD,SAAX,GAAuB,KAAKC,KAAL,CAAWK,WAAlC,GAAgD,KAAKL,KAAL,CAAWM,aAFrE;AAGE,MAAA,IAAI,EAAE,KAAKN,KAAL,CAAWD,SAAX,GAAuB,KAAKC,KAAL,CAAWO,UAAlC,GAA+C,KAAKP,KAAL,CAAWQ,YAHlE;AAIE,MAAA,KAAK,EAAC,kCAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,IAMQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BAZZ,EAeI1B,OAAO,CAACC,GAAR,CAAY,KAAKiB,KAAL,CAAWO,UAAvB,CAfJ,CADF;AAoBD;;AA9EqC;;AAkFxC,eAAeZ,SAAf","sourcesContent":["import React from 'react'\nimport Button from './Button'\nimport axios from 'axios'\nimport useTime from '../utils/useTime'\nimport sortForChart from '../utils/sortForChart'\nimport Chart from './Chart'\nimport Container from './Container'\n\nconst baseURL = `http://covid19.borisky.me:3003/api/v1/alltime/`\n\nconst countryTimeData = async (cn) => {\n  console.log('fetchinGGGGG');\n  const loc = cn || await currentCountry()\n  const data = await axios.get(baseURL+loc)\n  const dataRes = await sortForChart(data.data)\n  return dataRes\n}\n\nconst worldTimeData = async () => {\n  const data = await axios.get(baseURL)\n  const dataRes = await sortForChart(data.data)\n  return dataRes\n}\n\nasync function currentCountry(){\n  return await axios\n    .get('https://extreme-ip-lookup.com/json/')\n    .then(res => res.data.country)\n    .catch(e => 'israel')\n}\n\n\nclass CaseChart extends React.Component {\n\n  constructor(props){\n    super(props)\n    this.state = {\n      // country: this.props.country,\n      worldData: [],\n      countryData: [],\n      worldLabels: [],\n      countryLabels: [],\n      worldCases: [],\n      countryCases: [],\n      showWorld: true,\n      loading: false\n    }\n  }\n\n  setShowWorld = () => {\n    const showWorld = !this.state.showWorld\n    this.setState(prevState => ({ ...prevState, showWorld: showWorld }))\n  }\n\n  async componentDidMount() {\n    this.setState({ loading: true })\n\n    try {\n      const timeStats = await worldTimeData()\n      const countryStats = await countryTimeData(this.props.country)\n      const worldCases = timeStats && timeStats.datasets.filter(a => a.label === 'cases')\n      const countryCases = countryStats && countryStats.datasets.filter(a => a.label === 'cases')\n      const countryLabels = countryStats && countryStats.labels\n      const worldLabels = timeStats && timeStats.labels\n      this.setState({\n        worldData: timeStats,\n        countryData: countryStats,\n        worldCases,\n        countryCases,\n        worldLabels,\n        countryLabels,\n        loading: false\n      })\n    } catch(err) {\n      this.setState({ loading: false, error: err })\n    }\n\n\n  }\n\n  render() {\n\n    if (this.state.loading) {\n      return <Container><h1>Loading Data . . .</h1></Container>\n    }\n    if (this.state.error) {\n      return <Container><h1>{this.state.error}</h1></Container>\n    }\n\n    // console.log(this.state.worldCases);\n    return (\n      <Container>\n        <div style={{display: 'flex', justifyContent: 'center', padding: '34px 32px'}}>\n          <Button onClick={this.setShowWorld}>World</Button><span> | </span>\n          <Button onClick={this.setShowWorld}>{this.props.country || 'Israel'}</Button>\n        </div>\n        {\n          this.state.worldData &&\n            <Chart \n              type='line'\n              labels={this.state.showWorld ? this.state.worldLabels : this.state.countryLabels}\n              data={this.state.showWorld ? this.state.worldCases : this.state.countryCases}\n              label='Infection Growth - Country/World'\n            /> || <div> Loading Charts ... </div>\n        }\n        {\n          console.log(this.state.worldCases)\n        }\n      </Container>\n    )\n  }\n\n}\n\nexport default CaseChart\n"]},"metadata":{},"sourceType":"module"}