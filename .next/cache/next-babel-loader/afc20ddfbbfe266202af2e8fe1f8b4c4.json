{"ast":null,"code":"var _jsxFileName = \"/Users/raypo/Desktop/Projectos/CoronaStatus/components/CaseChart.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport axios from 'axios';\nimport useTime from '../utils/useTime';\nimport sortForChart from '../utils/sortForChart';\nimport Chart from './Chart';\nimport Container from './Container';\nconst baseURL = `http://covid19.borisky.me:3003/api/v1/alltime/`;\n\nconst countryTimeData = async cn => {\n  const loc = cn || (await currentCountry());\n  const data = await axios.get(baseURL + loc);\n  const dataRes = await sortForChart(data.data);\n  return data;\n};\n\nconst worldTimeData = async () => {\n  const data = await axios.get(baseURL);\n  const dataRes = await sortForChart(data.data); // .then(res => sortForChart(res.data))\n  // .catch(err => console.log(err))\n\n  return dataRes;\n};\n\nasync function currentCountry() {\n  return await axios.get('https://extreme-ip-lookup.com/json/').then(res => res.data.country).catch(e => 'israel');\n}\n\nclass CaseChart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      // country: this.props.country,\n      worldData: [],\n      countryData: [],\n      worldLabels: [],\n      countryLabels: [],\n      worldCases: [],\n      countryCases: [],\n      showWorld: true\n    };\n  }\n\n  setShowWorld() {\n    const showWorld = !this.state.showWorld;\n    this.setState({\n      showWorld\n    });\n  }\n\n  async componentDidMount() {\n    const timeStats = await worldTimeData();\n    const countryStats = await countryTimeData(this.props.country);\n    const worldCases = timeStats && timeStats.datasets.filter(a => a.label === 'cases'); // const countryCases = countryStats && countryStats.datasets.filter(a => a.label === 'cases')\n\n    console.log(timeStats);\n    this.setState({\n      worldData: timeStats,\n      // countryData: countryStats,\n      worldCases // countryCases\n\n    });\n  }\n\n  render() {\n    return __jsx(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    });\n  }\n\n}\n\nexport default CaseChart;","map":{"version":3,"sources":["/Users/raypo/Desktop/Projectos/CoronaStatus/components/CaseChart.js"],"names":["React","axios","useTime","sortForChart","Chart","Container","baseURL","countryTimeData","cn","loc","currentCountry","data","get","dataRes","worldTimeData","then","res","country","catch","e","CaseChart","Component","constructor","props","state","worldData","countryData","worldLabels","countryLabels","worldCases","countryCases","showWorld","setShowWorld","setState","componentDidMount","timeStats","countryStats","datasets","filter","a","label","console","log","render"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,SAAP,MAAsB,aAAtB;AAEA,MAAMC,OAAO,GAAI,gDAAjB;;AAEA,MAAMC,eAAe,GAAG,MAAOC,EAAP,IAAc;AACpC,QAAMC,GAAG,GAAGD,EAAE,KAAI,MAAME,cAAc,EAAxB,CAAd;AACA,QAAMC,IAAI,GAAG,MAAMV,KAAK,CAACW,GAAN,CAAUN,OAAO,GAACG,GAAlB,CAAnB;AACA,QAAMI,OAAO,GAAG,MAAMV,YAAY,CAACQ,IAAI,CAACA,IAAN,CAAlC;AACA,SAAOA,IAAP;AACD,CALD;;AAOA,MAAMG,aAAa,GAAG,YAAY;AAChC,QAAMH,IAAI,GAAG,MAAMV,KAAK,CAACW,GAAN,CAAUN,OAAV,CAAnB;AACA,QAAMO,OAAO,GAAG,MAAMV,YAAY,CAACQ,IAAI,CAACA,IAAN,CAAlC,CAFgC,CAG5B;AACA;;AACJ,SAAOE,OAAP;AACD,CAND;;AAQA,eAAeH,cAAf,GAA+B;AAC7B,SAAO,MAAMT,KAAK,CACfW,GADU,CACN,qCADM,EAEVG,IAFU,CAELC,GAAG,IAAIA,GAAG,CAACL,IAAJ,CAASM,OAFX,EAGVC,KAHU,CAGJC,CAAC,IAAI,QAHD,CAAb;AAID;;AAGD,MAAMC,SAAN,SAAwBpB,KAAK,CAACqB,SAA9B,CAAwC;AAEtCC,EAAAA,WAAW,CAACC,KAAD,EAAO;AAChB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACX;AACAC,MAAAA,SAAS,EAAE,EAFA;AAGXC,MAAAA,WAAW,EAAE,EAHF;AAIXC,MAAAA,WAAW,EAAE,EAJF;AAKXC,MAAAA,aAAa,EAAE,EALJ;AAMXC,MAAAA,UAAU,EAAE,EAND;AAOXC,MAAAA,YAAY,EAAE,EAPH;AAQXC,MAAAA,SAAS,EAAE;AARA,KAAb;AAUD;;AAEDC,EAAAA,YAAY,GAAG;AACb,UAAMD,SAAS,GAAG,CAAC,KAAKP,KAAL,CAAWO,SAA9B;AACA,SAAKE,QAAL,CAAc;AAAEF,MAAAA;AAAF,KAAd;AACD;;AAED,QAAMG,iBAAN,GAA0B;AACxB,UAAMC,SAAS,GAAG,MAAMrB,aAAa,EAArC;AACA,UAAMsB,YAAY,GAAG,MAAM7B,eAAe,CAAC,KAAKgB,KAAL,CAAWN,OAAZ,CAA1C;AAEA,UAAMY,UAAU,GAAGM,SAAS,IAAIA,SAAS,CAACE,QAAV,CAAmBC,MAAnB,CAA0BC,CAAC,IAAIA,CAAC,CAACC,KAAF,KAAY,OAA3C,CAAhC,CAJwB,CAKxB;;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYP,SAAZ;AAEA,SAAKF,QAAL,CAAc;AACZR,MAAAA,SAAS,EAAEU,SADC;AAEZ;AACAN,MAAAA,UAHY,CAIZ;;AAJY,KAAd;AAOD;;AAEDc,EAAAA,MAAM,GAAG;AACP,WACE,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF;AAGD;;AA1CqC;;AA8CxC,eAAevB,SAAf","sourcesContent":["import React from 'react'\nimport axios from 'axios'\nimport useTime from '../utils/useTime'\nimport sortForChart from '../utils/sortForChart'\nimport Chart from './Chart'\nimport Container from './Container'\n\nconst baseURL = `http://covid19.borisky.me:3003/api/v1/alltime/`\n\nconst countryTimeData = async (cn) => {\n  const loc = cn || await currentCountry()\n  const data = await axios.get(baseURL+loc)\n  const dataRes = await sortForChart(data.data)\n  return data\n}\n\nconst worldTimeData = async () => {\n  const data = await axios.get(baseURL)\n  const dataRes = await sortForChart(data.data)\n      // .then(res => sortForChart(res.data))\n      // .catch(err => console.log(err))\n  return dataRes\n}\n\nasync function currentCountry(){\n  return await axios\n    .get('https://extreme-ip-lookup.com/json/')\n    .then(res => res.data.country)\n    .catch(e => 'israel')\n}\n\n\nclass CaseChart extends React.Component {\n\n  constructor(props){\n    super(props)\n    this.state = {\n      // country: this.props.country,\n      worldData: [],\n      countryData: [],\n      worldLabels: [],\n      countryLabels: [],\n      worldCases: [],\n      countryCases: [],\n      showWorld: true\n    }\n  }\n\n  setShowWorld() {\n    const showWorld = !this.state.showWorld\n    this.setState({ showWorld })\n  }\n\n  async componentDidMount() {\n    const timeStats = await worldTimeData()\n    const countryStats = await countryTimeData(this.props.country)\n\n    const worldCases = timeStats && timeStats.datasets.filter(a => a.label === 'cases')\n    // const countryCases = countryStats && countryStats.datasets.filter(a => a.label === 'cases')\n    console.log(timeStats);\n\n    this.setState({\n      worldData: timeStats,\n      // countryData: countryStats,\n      worldCases,\n      // countryCases\n    })\n\n  }\n\n  render() {\n    return (\n      <Container />\n    )\n  }\n\n}\n\nexport default CaseChart\n"]},"metadata":{},"sourceType":"module"}