{"ast":null,"code":"var _jsxFileName = \"/Users/raypo/Desktop/Projectos/CoronaStatus/components/CaseChart.js\";\nvar __jsx = React.createElement;\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport Button from './Button';\nimport axios from 'axios';\nimport sortForChart from '../utils/sortForChart';\nimport Chart from './Chart';\nimport Container from './Container';\nimport { motion } from 'framer-motion';\nconst baseURL = `https://nCorona.live/api/v1/alltime/`;\n\nconst countryTimeData = async cn => {\n  const loc = cn || (await currentCountry());\n  const data = await axios.get(baseURL + loc);\n  const dataRes = await sortForChart(data.data);\n  return dataRes;\n};\n\nconst worldTimeData = async () => {\n  const data = await axios.get(baseURL);\n  const dataRes = await sortForChart(data.data);\n  return dataRes;\n};\n\nasync function currentCountry() {\n  return await axios.get('https://extreme-ip-lookup.com/json/').then(res => res.data.country).catch(e => 'israel');\n}\n\nclass CaseChart extends React.Component {\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"present\", val => this.setState({\n      dataToPresent: val\n    }));\n\n    this.state = {\n      dataToPresent: 'worldCases',\n      worldData: [],\n      countryData: [],\n      worldLabels: [],\n      countryLabels: [],\n      worldCases: [],\n      deathCases: [],\n      newCases: [],\n      countryCases: [],\n      showWorld: true,\n      loading: false\n    };\n  }\n\n  static async getInitialProps(ctx) {\n    const timeStats = await worldTimeData();\n    const countryStats = await countryTimeData(this.props.country);\n    return {\n      timeStats,\n      countryStats\n    };\n  }\n\n  async componentDidMount() {\n    this.setState({\n      loading: true\n    });\n\n    try {\n      const {\n        timeStats,\n        countryStats\n      } = this.props;\n      const worldCases = timeStats && timeStats.datasets.filter(a => a.label === 'cases');\n      const deathCases = timeStats && timeStats.datasets.filter(a => a.label === 'deaths');\n      const newCases = timeStats && timeStats.datasets.filter(a => a.label === 'new cases');\n      const countryCases = countryStats && countryStats.datasets.filter(a => a.label === 'cases');\n      const countryLabels = countryStats && countryStats.labels;\n      const worldLabels = timeStats && timeStats.labels;\n      const worldDeaths = timeStats && timeStats.datasets.filter(a => a.label === 'deaths');\n      this.setState({\n        worldData: timeStats,\n        countryData: countryStats,\n        worldCases,\n        deathCases,\n        newCases,\n        countryCases,\n        worldLabels,\n        countryLabels,\n        loading: false\n      });\n    } catch (err) {\n      this.setState({\n        loading: false,\n        error: err\n      });\n    }\n  }\n\n  render() {\n    if (this.state.loading) {\n      return __jsx(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, __jsx(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, \"Loading Data . . .\"));\n    }\n\n    if (this.state.error) {\n      return __jsx(Container, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, __jsx(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      }, this.state.error));\n    }\n\n    return __jsx(Container, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, __jsx(\"p\", {\n      style: {\n        margin: '82px 0 0 0'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, this.props.isHeb && 'שיעור התפשטות הנגיף בעולם, מקרי מוות ומסרים מקרים חדשים ליום' || 'Growth Rate of the virus in the world, including deaths and new cases'), this.state.worldData && __jsx(motion.div, {\n      initial: \"initial\",\n      animate: \"enter\",\n      exit: \"exit\",\n      variants: {\n        exit: {\n          transition: {\n            staggerChildren: 0.1\n          }\n        }\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, __jsx(Chart, {\n      type: \"line\",\n      labels: this.state.worldLabels,\n      data: this.state[this.state.dataToPresent],\n      label: \"Global Statistics\",\n      theme: this.props.theme,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    })) || __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, \" Loading Charts ... \"), __jsx(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-around',\n        padding: '34px 32px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, __jsx(Button, {\n      onClick: () => this.present('worldCases'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, this.props.isHeb && 'נדבקים' || 'Cases'), __jsx(Button, {\n      onClick: () => this.present('deathCases'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, this.props.isHeb && 'מקרי מוות' || 'Deaths'), __jsx(Button, {\n      onClick: () => this.present('newCases'),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, this.props.isHeb && 'מקרים חדשים' || 'New cases')));\n  }\n\n}\n\nexport default CaseChart;","map":{"version":3,"sources":["/Users/raypo/Desktop/Projectos/CoronaStatus/components/CaseChart.js"],"names":["React","Button","axios","sortForChart","Chart","Container","motion","baseURL","countryTimeData","cn","loc","currentCountry","data","get","dataRes","worldTimeData","then","res","country","catch","e","CaseChart","Component","constructor","props","val","setState","dataToPresent","state","worldData","countryData","worldLabels","countryLabels","worldCases","deathCases","newCases","countryCases","showWorld","loading","getInitialProps","ctx","timeStats","countryStats","componentDidMount","datasets","filter","a","label","labels","worldDeaths","err","error","render","margin","isHeb","exit","transition","staggerChildren","theme","display","justifyContent","padding","present"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Button from './Button'\nimport axios from 'axios'\nimport sortForChart from '../utils/sortForChart'\nimport Chart from './Chart'\nimport Container from './Container'\nimport { motion } from 'framer-motion'\n\nconst baseURL = `https://nCorona.live/api/v1/alltime/`\n\nconst countryTimeData = async (cn) => {\n  const loc = cn || await currentCountry()\n  const data = await axios.get(baseURL+loc)\n  const dataRes = await sortForChart(data.data)\n  return dataRes\n}\n\nconst worldTimeData = async () => {\n  const data = await axios.get(baseURL)\n  const dataRes = await sortForChart(data.data)\n  return dataRes\n}\n\nasync function currentCountry(){\n  return await axios\n    .get('https://extreme-ip-lookup.com/json/')\n    .then(res => res.data.country)\n    .catch(e => 'israel')\n}\n\n\nclass CaseChart extends React.Component {\n\n  constructor(props){\n    super(props)\n    this.state = {\n      dataToPresent: 'worldCases',\n      worldData: [],\n      countryData: [],\n      worldLabels: [],\n      countryLabels: [],\n      worldCases: [],\n      deathCases: [],\n      newCases: [],\n      countryCases: [],\n      showWorld: true,\n      loading: false\n    }\n  }\n\n  static async getInitialProps(ctx) {\n    const timeStats = await worldTimeData()\n    const countryStats = await countryTimeData(this.props.country)\n    return { timeStats, countryStats }\n  }\n\n  present = val => this.setState({dataToPresent: val})\n\n  async componentDidMount() {\n    this.setState({ loading: true })\n\n    try {\n\n      const { timeStats, countryStats } = this.props\n\n      const worldCases = timeStats && timeStats.datasets.filter(a => a.label === 'cases')\n      const deathCases = timeStats && timeStats.datasets.filter(a => a.label === 'deaths')\n      const newCases = timeStats && timeStats.datasets.filter(a => a.label === 'new cases')\n\n      const countryCases = countryStats && countryStats.datasets.filter(a => a.label === 'cases')\n      const countryLabels = countryStats && countryStats.labels\n      const worldLabels = timeStats && timeStats.labels\n      const worldDeaths = timeStats && timeStats.datasets.filter(a => a.label === 'deaths')\n\n\n      this.setState({\n        worldData: timeStats,\n        countryData: countryStats,\n        worldCases,\n        deathCases,\n        newCases,\n        countryCases,\n        worldLabels,\n        countryLabels,\n        loading: false\n      })\n    } catch(err) {\n      this.setState({ loading: false, error: err })\n    }\n\n\n  }\n\n  render() {\n\n    if (this.state.loading) {\n      return <Container><h1>Loading Data . . .</h1></Container>\n    }\n    if (this.state.error) {\n      return <Container><h1>{this.state.error}</h1></Container>\n    }\n\n    return (\n      <Container >\n        <p style={{margin: '82px 0 0 0'}}>\n          {this.props.isHeb &&\n              'שיעור התפשטות הנגיף בעולם, מקרי מוות ומסרים מקרים חדשים ליום'\n                || 'Growth Rate of the virus in the world, including deaths and new cases'}\n        </p>\n        {\n          this.state.worldData && (\n            <motion.div initial=\"initial\" animate=\"enter\" exit=\"exit\" variants={{ exit: { transition: { staggerChildren: 0.1 } } }}>\n            <Chart \n              type='line'\n              labels={this.state.worldLabels}\n              data={this.state[this.state.dataToPresent]}\n              label='Global Statistics'\n              theme={this.props.theme}\n            /> \n            </motion.div>)\n            || <div> Loading Charts ... </div>\n        }\n        <div style={{display: 'flex', justifyContent: 'space-around', padding: '34px 32px'}}>\n          <Button onClick={() => this.present('worldCases')}>{this.props.isHeb && 'נדבקים' || 'Cases'}</Button>\n          <Button onClick={() => this.present('deathCases')}>{this.props.isHeb && 'מקרי מוות' || 'Deaths'}</Button>\n          <Button onClick={() => this.present('newCases')}>{this.props.isHeb && 'מקרים חדשים' || 'New cases'}</Button>\n        </div>\n      </Container>\n    )\n  }\n\n}\n\nexport default CaseChart\n"]},"metadata":{},"sourceType":"module"}